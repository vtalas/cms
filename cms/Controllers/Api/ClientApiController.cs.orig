using System;
using System.Linq;
using System.Web.Mvc;
using cms.data.Dtos;
<<<<<<< HEAD
=======
using cms.data.EF;
using cms.data.EF.DataProviderImplementation;
using cms.data.EF.RepositoryImplementation;
>>>>>>> origin/trunk

namespace cms.Controllers.Api
{
    public class ClientApiController : WebApiControllerBase
    {
		public GridPageDto GetPage(string id)
		{
<<<<<<< HEAD
			using (var db = SessionProvider.CreateSession)
			{
				return db.Page.Get(id);
			}
		}

=======
			//return new GridPageDto()
			//{
			//	Category = "kabsdkjbasd",
			//	Id = Guid.NewGuid()
			//};

			using (var repo = new EfRepository(new EfContext()))
			{
				var app = repo.ApplicationSettings.Single(x => x.Id == ApplicationId);
				var session = new PageAbstractImpl(app, repo);

				return session.Get(id);
			}
		}

>>>>>>> origin/trunk
		//public ActionResult GetGrid(Guid id)
		//{
		//	using (var db = SessionProvider.CreateSession)
		//	{
		//		var a = db.Page.Get(id);
		//		return new Code.JSONNetResult(a);
		//	}
		//}
	}
}
